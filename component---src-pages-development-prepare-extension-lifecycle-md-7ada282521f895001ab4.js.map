{"version":3,"file":"component---src-pages-development-prepare-extension-lifecycle-md-7ada282521f895001ab4.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/development/prepare/extension-lifecycle.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"extension-lifecycle\"\n    }}>{`Extension lifecycle`}</h1>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The recommendations laid out below are to be phased out in the future in favor of `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.adobe.com/commerce/php/development/components/declarative-schema/#declarative-schema\"\n      }}>{`declarative schema`}</a>{` development approaches.`}</p>\n    <p>{`This topic describes a module's lifecycle and how to create classes that execute code when your module is initialized, upgraded, or uninstalled.\nThese executable classes can perform tasks that set up the database, update data, and clean up data.`}</p>\n    <p><em parentName=\"p\">{`Note:`}</em>{` Theme and language package extensions do not need initialization or uninstallation tasks because they do not install database schemas or update data.`}</p>\n    <h2 {...{\n      \"id\": \"lifecycle-guidelines\"\n    }}>{`Lifecycle guidelines`}</h2>\n    <p>{`Follow these guidelines when developing your executable classes to have them run during specific lifecycle stages:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Put your executable class in the `}<inlineCode parentName=\"li\">{`Setup`}</inlineCode>{` directory inside your module's root directory.`}</li>\n      <li parentName=\"ul\">{`Use the specific file and class name for your class's target lifecycle stage.`}</li>\n      <li parentName=\"ul\">{`Implement the specific class interface and function for your class's target stage.`}</li>\n      <li parentName=\"ul\">{`Follow Magento's `}<a parentName=\"li\" {...{\n          \"href\": \"../versioning/index.md\"\n        }}>{`versioning policy`}</a>{` when changing your module's version.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"schema-initialization-stages\"\n    }}>{`Schema initialization stages`}</h2>\n    <p>{`The schema initialization stages are the first set of processes that Adobe Commerce and Magento Open Source run when your module is installed, re-installed, or upgraded.`}</p>\n    <h3 {...{\n      \"id\": \"schema-installation\"\n    }}>{`Schema installation`}</h3>\n    <p>{`The application executes the schema installation class during your module's initial install.\nIf the `}<inlineCode parentName=\"p\">{`schema_version`}</inlineCode>{` for your module is found in the `}<inlineCode parentName=\"p\">{`setup_module`}</inlineCode>{` table, the application skips this stage and proceeds to the `}<a parentName=\"p\" {...{\n        \"href\": \"#schema-upgrade\"\n      }}>{`schema upgrade`}</a>{` stage.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name:`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`InstallSchema`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface:`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/InstallSchemaInterface.php\"\n            }}><inlineCode parentName=\"a\">{`InstallSchemaInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method:`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`install()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` InstallSchema.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\InstallSchemaInterface;\n\nclass InstallSchema implements InstallSchemaInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function install(SchemaSetupInterface $setup, ModuleContextInterface $context)\n    {\n        //Install schema logic\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"schema-upgrade\"\n    }}>{`Schema upgrade`}</h3>\n    <p>{`The application executes your module's schema upgrade class when it detects an earlier installation.\nThe purpose of this class is to update the database structure or apply patches.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`UpgradeSchema`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/UpgradeSchemaInterface.php\"\n            }}><inlineCode parentName=\"a\">{`UpgradeSchemaInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`upgrade()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` UpgradeSchema.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\UpgradeSchemaInterface;\n\nclass UpgradeSchema implements UpgradeSchemaInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function upgrade(SchemaSetupInterface $setup, ModuleContextInterface $context)\n    {\n        //Upgrade schema logic\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"recurring-schema-event\"\n    }}>{`Recurring schema event`}</h3>\n    <p>{`The application executes your module's recurring schema event class after every schema installation or upgrade stage.\nThis class makes final modifications to the database schema after it has been installed or updated.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Recurring`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/InstallSchemaInterface.php\"\n            }}><inlineCode parentName=\"a\">{`InstallSchemaInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`install()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` Recurring.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\InstallSchemaInterface;\n\nclass Recurring implements InstallSchemaInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function install(SchemaSetupInterface $setup, ModuleContextInterface $context)\n    {\n        //Recurring schema event logic\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"data-initialization\"\n    }}>{`Data initialization`}</h2>\n    <p>{`The application goes through your module's data initialization stages after the schema initialization processes complete.`}</p>\n    <h3 {...{\n      \"id\": \"data-installation\"\n    }}>{`Data installation`}</h3>\n    <p>{`The application executes the data installation class during your module's initial install unless an existing version entry is found in the database.\nThe purpose of this class is to populate the database with initial data.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`InstallData`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/InstallDataInterface.php\"\n            }}><inlineCode parentName=\"a\">{`InstallDataInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`install()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` InstallData.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\InstallDataInterface;\n\nclass InstallData implements InstallDataInterface\n{\n    /**\n     * {@inheritdoc}\n     */\n    public function install(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\n    {\n        // Data install logic\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"data-upgrade\"\n    }}>{`Data upgrade`}</h3>\n    <p>{`The application executes the data upgrade class when it detects an earlier version in the `}<inlineCode parentName=\"p\">{`data_version`}</inlineCode>{` field for the module in the `}<inlineCode parentName=\"p\">{`setup_module`}</inlineCode>{` table.\nThe purpose of this class is to fix corrupted data or populate a new data field after a schema change.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`UpgradeData`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/UpgradeDataInterface.php\"\n            }}><inlineCode parentName=\"a\">{`UpgradeDataInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`upgrade()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` UpgradeData.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\UpgradeDataInterface;\n\nclass UpgradeData implements UpgradeDataInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function upgrade(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\n    {\n        // Data upgrade logic\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"recurring-data-event\"\n    }}>{`Recurring data event`}</h3>\n    <p>{`The application executes your module's recurring data event class after every data installation or upgrade stage.\nThis class makes final modifications to the database store after data has been installed or updated.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`RecurringData`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/InstallDataInterface.php\"\n            }}><inlineCode parentName=\"a\">{`InstallDataInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`install()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` RecurringData.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\InstallDataInterface;\n\nclass RecurringData implements InstallDataInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function install(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\n    {\n        // Recurring data event logic\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"database-interface\"\n    }}>{`Database interface`}</h2>\n    <p>{`Use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/ModuleDataSetupInterface.php\"\n      }}><inlineCode parentName=\"a\">{`ModuleDataSetupInterface`}</inlineCode></a>{` when you need to do database manipulations.\nIf your installation or upgrade logic spans multiple classes, pass this resource on to other classes that need to modify the database.`}</p>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Customer/Setup/Patch/Data/DefaultCustomerGroupsAndAttributes.php\"\n      }}>{`Customer module's DefaultCustomerGroupsAndAttributes.php`}</a></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nclass DefaultCustomerGroupsAndAttributes implements DataPatchInterface, PatchVersionInterface\n{\n    /**\n     * @var CustomerSetupFactory\n     */\n    private $customerSetupFactory;\n    /**\n     * @var ModuleDataSetupInterface\n     */\n    private $moduleDataSetup;\n    /**\n     * DefaultCustomerGroupsAndAttributes constructor.\n     * @param CustomerSetupFactory $customerSetupFactory\n     * @param ModuleDataSetupInterface $moduleDataSetup\n     */\n    public function __construct(\n        CustomerSetupFactory $customerSetupFactory,\n        ModuleDataSetupInterface $moduleDataSetup\n    ) {\n        $this->customerSetupFactory = $customerSetupFactory;\n        $this->moduleDataSetup = $moduleDataSetup;\n    }\n    /**\n     * {@inheritdoc}\n     * @SuppressWarnings(PHPMD.ExcessiveMethodLength)\n     */\n    public function apply()\n    {\n        /** @var CustomerSetup $customerSetup */\n        $customerSetup = $this->customerSetupFactory->create(['setup' => $this->moduleDataSetup]);\n        ...\n        $customerSetup->installEntities();\n        $customerSetup->installCustomerForms();\n        $disableAGCAttribute = $customerSetup->getEavConfig()->getAttribute('customer', 'disable_auto_group_change');\n        ...\n        $migrationSetup = $this->moduleDataSetup->createMigrationSetup();\n        $migrationSetup->appendClassAliasReplace(\n            'customer_eav_attribute',\n            'data_model',\n            Migration::ENTITY_TYPE_MODEL,\n            Migration::FIELD_CONTENT_TYPE_PLAIN,\n            ['attribute_id']\n        );\n        $migrationSetup->doUpdateClassAliases();\n    }\n    ...\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"module-version\"\n    }}>{`Module version`}</h2>\n    <p>{`Use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/ModuleContextInterface.php\"\n      }}><inlineCode parentName=\"a\">{`ModuleContextInterface`}</inlineCode></a>{` to get the current module version and execute logic based on the version.`}</p>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` User module's UpgradeData.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace Magento\\\\User\\\\Setup;\n\nuse Magento\\\\Framework\\\\Encryption\\\\Encryptor;\nuse Magento\\\\Framework\\\\Setup\\\\ModuleContextInterface;\nuse Magento\\\\Framework\\\\Setup\\\\ModuleDataSetupInterface;\nuse Magento\\\\Framework\\\\Setup\\\\UpgradeDataInterface;\n\nclass UpgradeData implements UpgradeDataInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function upgrade(ModuleDataSetupInterface $setup, ModuleContextInterface $context)\n    {\n        $setup->startSetup();\n        if (version_compare($context->getVersion(), '2.0.1', '<')) {\n            $this->upgradeHash($setup);\n        }\n        $setup->endSetup();\n    }\n\n    ...\n\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"uninstall-event\"\n    }}>{`Uninstall event`}</h2>\n    <p>{`The application executes the uninstall event class when your module is uninstalled using the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento module:uninstall --remove-data <module_name>\n`}</code></pre>\n    <p>{`In this phase, your module should remove all traces of its existence in the database by dropping tables, deleting data, or restoring data.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}></th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Class name`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Uninstall`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Interface`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Setup/UninstallInterface.php\"\n            }}><inlineCode parentName=\"a\">{`UninstallInterface`}</inlineCode></a></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><strong parentName=\"td\">{`Method`}</strong></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`uninstall()`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p><strong parentName=\"p\">{`Example:`}</strong>{` Uninstall.php`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Setup;\n\nuse Magento\\\\Framework\\\\Setup\\\\UninstallInterface;\n\nclass Uninstall implements UninstallInterface\n{\n    /**\n     * @inheritdoc\n     */\n    public function uninstall(SchemaSetupInterface $setup, ModuleContextInterface $context)\n    {\n        //Uninstall logic\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"disabled-modules\"\n    }}>{`Disabled modules`}</h3>\n    <p>{`A disabled module can still execute its uninstall event.\nHowever, module-specific configurations such as its dependency injection and event/observer configurations will not be available and will cause problems.`}</p>\n    <p>{`Avoid this situation by not including dependencies in your uninstall event class`}</p>\n    <p><strong parentName=\"p\">{`Related Topics:`}</strong></p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"../versioning/index.md\"\n        }}>{`Versioning policy`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","variant","slots","parentName","isMDXComponent"],"sourceRoot":""}